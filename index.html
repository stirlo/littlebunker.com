---
layout: default
---

<!-- Bluesky Integration Banner -->
{%- include bluesky-banner.html -%}

<div class="home">
  <div class="welcome-section glass-card">
    <h1 class="site-welcome">{{ site.title | default: "Little Bunker Observations" }}</h1>
    <p class="site-description">{{ site.description | default: "Methodically tracking our changing world through climate data, extreme weather events, and their societal impacts." }}</p>
  </div>

  {%- if site.posts.size > 0 -%}
    <section class="latest-observations">
      <h2 class="section-title">üåç Latest Environmental Observations</h2>

      <!-- Category Filter Tabs -->
      <div class="category-tabs">
        <button class="tab-button active" data-category="all">All</button>
        <button class="tab-button" data-category="climate-science">Climate Science</button>
        <button class="tab-button" data-category="extreme-weather">Extreme Weather</button>
        <button class="tab-button" data-category="environmental-news">Environmental News</button>
        <button class="tab-button" data-category="social-impact">Social Impact</button>
        <button class="tab-button" data-category="research-papers">Research Papers</button>
        <button class="tab-button" data-category="media">Media</button>
      </div>

      <div class="feed-grid">
        {%- for post in site.posts limit: 24 -%}
        <article class="feed-item" data-categories="{{ post.categories | join: ' ' }}">
          <div class="post-meta">
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %-d, %Y" }}</time>
            {%- if post.categories.size > 0 -%}
              ‚Ä¢ 
              {%- for category in post.categories -%}
                <span class="category-tag">{{ category | replace: '-', ' ' | replace: '_', ' ' | capitalize }}</span>
              {%- endfor -%}
            {%- endif -%}
          </div>

          <h3>
            {%- if post.external_url -%}
              <a href="{{ post.external_url }}" target="_blank" rel="noopener">
                {{ post.title | escape }}
                <span class="external-link-icon">‚Üó</span>
              </a>
            {%- else -%}
              <a href="{{ post.url | relative_url }}">
                {{ post.title | escape }}
              </a>
            {%- endif -%}
          </h3>

          <div class="post-excerpt">
            {{ post.excerpt | strip_html | truncatewords: 25 }}
          </div>

          {%- if post.tags and post.tags.size > 0 -%}
            <div class="post-tags-preview">
              {%- for tag in post.tags limit: 3 -%}
                <span class="tag-small">{{ tag }}</span>
              {%- endfor -%}
            </div>
          {%- endif -%}

          {%- if post.external_url -%}
            <div class="source-link">
              <a href="{{ post.external_url }}" target="_blank" rel="noopener" class="read-original">
                Read Original Article ‚Üí
              </a>
            </div>
          {%- endif -%}
        </article>
        {%- endfor -%}
      </div>

      <div class="archive-link-wrapper">
        <a href="{{ '/archive/' | relative_url }}" class="archive-link">üìÖ View Complete Archive by Date</a>
      </div>
    </section>

    <div class="rss-subscribe glass-card">
      <h3>Stay Updated</h3>
      <p>Subscribe to our <a href="{{ "/feed.xml" | relative_url }}">RSS feed</a> for the latest climate observations and environmental news.</p>
    </div>
  {%- endif -%}
</div>

<script>
// Enhanced category filtering with smooth animations
document.addEventListener('DOMContentLoaded', function() {
  const tabs = document.querySelectorAll('.tab-button');
  const posts = document.querySelectorAll('.feed-item');

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const category = this.dataset.category;

      // Update active tab
      tabs.forEach(t => t.classList.remove('active'));
      this.classList.add('active');

      // Filter posts with smooth animation
      posts.forEach((post, index) => {
        const shouldShow = category === 'all' || 
                          post.dataset.categories.includes(category.replace('-', '_'));

        if (shouldShow) {
          post.classList.remove('hidden');
          post.style.animationDelay = `${index * 0.1}s`;
        } else {
          post.classList.add('hidden');
        }
      });
    });
  });

  // Smooth scroll for archive link
  document.querySelector('.archive-link')?.addEventListener('click', function(e) {
    if (this.getAttribute('href').startsWith('#')) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth' });
      }
    }
  });
});
</script>
